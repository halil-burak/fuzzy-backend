package com.fuzzy.fuzzy_backend.service;

import com.fuzzy.fuzzy_backend.model.Product;
import com.fuzzy.fuzzy_backend.repository.ProductRepository;
import com.fuzzy.fuzzy_backend.util.FuzzySearch;
import jakarta.annotation.PostConstruct;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.NoSuchElementException;
import java.util.stream.Collectors;

@Service
public class ProductService {
    private final ProductRepository productRepository;

    public ProductService(ProductRepository productRepository) {
        this.productRepository = productRepository;
    }

    @PostConstruct
    public void initData() {
        Product initialProduct = new Product(
                "Smartphone",
                "Electronics",
                "A high-quality smartphone with great features.",
                999.0,
                "data:image/jpeg;base64,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"
        );

        Product initialProduct2 = new Product(
                "Laptop",
                "Electronics",
                "A high-quality laptop with great features.",
                1299.0,
                "data:image/png;base64,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"
        );

        Product initialProduct3 = new Product(
                "Tablet",
                "Electronics",
                "A high-quality tablet with great features.",
                499.0,
                "data:image/jpeg;base64,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"
        );

        Product initialProduct4 = new Product(
                "Smartwatch",
                "Electronics",
                "A high-quality smartwatch with great features.",
                299.0,
                "https://img.freepik.com/free-photo/smartwatch-screen-digital-device_53876-96810.jpg"
        );

        Product initialProduct5 = new Product(
                "Sneakers",
                "Footwear",
                "A high-quality sneakers with great features.",
                99.0,
                "data:image/jpeg;base64,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"
        );

        productRepository.save(initialProduct);
        productRepository.save(initialProduct2);
        productRepository.save(initialProduct3);
        productRepository.save(initialProduct4);
        productRepository.save(initialProduct5);
    }

    public int getTotalNrProducts() {
        return productRepository.findAll().size();
    }

    public List<Product> getAllProducts(int page, int limit) {
        System.out.println("Getting all products with page: " + page + " and limit: " + limit);

        List<Product> allProducts = productRepository.findAll();

        int totalProducts = allProducts.size();

        int fromIndex = (page) * limit;
        int toIndex = Math.min(fromIndex + limit, totalProducts);

        if (fromIndex >= totalProducts) {
            throw new IllegalArgumentException("Page number out of range.");
        }

        return allProducts.subList(fromIndex, toIndex);
    }

    public List<Product> searchProducts(String searchTerm) {
        System.out.println("Searching products with term: " + searchTerm);
        return productRepository.findAll().stream()
                .filter(product -> FuzzySearch.isSimilar(product.getName(), searchTerm))
                .collect(Collectors.toList());
    }

    public Product getProductById(String id) {
        System.out.println("Getting product with ID: " + id);
        return productRepository.findById(id)
                .orElseThrow(() -> new NoSuchElementException("Product not found with ID: " + id));
    }

    public Product addProduct(Product product) {
        System.out.println("Adding product: " + product.toString());
        return productRepository.save(product);
    }

    public Product updateProduct(String id, Product product) {
        Product existingProduct = productRepository.findById(id).orElseThrow(() -> new NoSuchElementException("Product not found with ID: " + id));

        existingProduct.setName(product.getName());
        existingProduct.setCategory(product.getCategory());
        existingProduct.setDescription(product.getDescription());
        existingProduct.setPrice(product.getPrice());
        existingProduct.setImageUrl(product.getImageUrl());
        return productRepository.update(existingProduct);
    }
}
